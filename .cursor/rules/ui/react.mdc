---
description: 
globs: *.tsx
alwaysApply: false
---
### Guidelines for React

- Use functional components with hooks instead of class components
- Never use "use client" and other Next.js directives as we use React with Astro
- Extract logic into custom hooks in `src/components/hooks`
- Implement React.memo() for expensive components that render often with the same props
- Utilize React.lazy() and Suspense for code-splitting and performance optimization
- Use the useCallback hook for event handlers passed to child components to prevent unnecessary re-renders
- Prefer useMemo for expensive calculations to avoid recomputation on every render
- Implement useId() for generating unique IDs for accessibility attributes
- Consider using the new useOptimistic hook for optimistic UI updates in forms
- Use useTransition for non-urgent state updates to keep the UI responsive

### React Query Provider

- **QueryProvider MUST be included inside React components, NOT in Astro pages**
- When a React component uses React Query hooks (useQuery, useMutation, etc.), wrap the component's content with QueryProvider internally
- Follow the pattern used in `TourDashboard.tsx`, `TourDetailsView.tsx`, and `ProfileView.tsx`:
  ```tsx
  // Component content that uses React Query hooks
  const ComponentContent = (props) => {
    const { data } = useQuery(...);
    // ... component logic
  };
  
  // Export wrapper with QueryProvider
  export const Component = (props) => {
    return (
      <QueryProvider>
        <ComponentContent {...props} />
      </QueryProvider>
    );
  };
  ```
- Do NOT add QueryProvider in `.astro` files - it should only exist within React components
- This ensures proper context sharing within the React component tree and avoids SSR issues

### Components Reference

Refer to `.cursor/rules/components/COMPONENTS_REFERENCE.md` for a complete catalog of all React components in the codebase. The reference includes:
- All existing components organized by category (Auth, Tours, UI, Date, Theme, etc.)
- Component locations, props, and usage patterns
- Component relationships and dependencies
- Development guidelines for consistency

When creating new React components:
1. Check if a similar component exists in the reference
2. Follow existing component patterns (file structure, TypeScript types, styling approach)
3. Use existing UI primitives from `src/components/ui` as building blocks
4. Ensure proper internationalization support with react-i18next
5. Include appropriate accessibility attributes and ARIA labels