---
import Layout from "@/layouts/Layout.astro";
import TourDashboard from "@/components/TourDashboard";
import QueryProvider from "@/components/QueryProvider";

const { user } = Astro.locals;

// User is guaranteed to exist here because of middleware protection.
// Default to true only as a fallback, though it shouldn't be needed.
const onboardingCompleted = user?.profile.onboarding_completed ?? true;
---

<Layout title="Dashboard">
  <QueryProvider client:load>
    <TourDashboard client:load onboardingCompleted={onboardingCompleted} />
  </QueryProvider>
</Layout>
